<!-- markdownlint-disable MD024 MD025 -->

# A3s API Documentation

> Version: 1

## authn/issue

### Issue

Issues a new a normalized token using various authentication sources.

#### Example

```json
{
  "audience": [
    "https://myfirstapp",
    "https://mysecondapp"
  ],
  "cloak": [
    "org=",
    "age="
  ],
  "cookie": false,
  "restrictedNamespace": "/namespace",
  "restrictedNetworks": [
    "10.0.0.0/8",
    "127.0.0.1/32"
  ],
  "restrictedPermissions": [
    "dogs,post"
  ],
  "sourceName": "/my/ns",
  "sourceNamespace": "/my/ns",
  "sourceType": "OIDC",
  "tokenType": "Identity"
}
```

#### Relations

##### `POST /issue`

Ask to issue a new authentication token.

#### Attributes

##### `audience`

Type: `[]string`

Requested audience for the delivered token.

##### `cloak`

Type: `[]string`

Sets a list of identity claim prefix to allow in the final token. This can be
used to hide some information when asking for a token as not all systems need to
know all of the claims.

##### `cookie`

Type: `boolean`

If set, return the token as a secure cookie.

##### `cookieDomain`

Type: `string`

If set, use the provided domain for the delivered cookie.

##### `inputA3S`

Type: [`issuea3s`](#issuea3s)

Contains additional information for an A3S token source.

##### `inputAWS`

Type: [`issueaws`](#issueaws)

Contains additional information for an AWS STS token source.

##### `inputAzure`

Type: [`issueazure`](#issueazure)

Contains additional information for an Azure token source.

##### `inputGCP`

Type: [`issuegcp`](#issuegcp)

Contains additional information for an GCP token source.

##### `inputHTTP`

Type: [`issuehttp`](#issuehttp)

Contains additional information for an HTTP source.

##### `inputLDAP`

Type: [`issueldap`](#issueldap)

Contains additional information for an LDAP source.

##### `inputOIDC`

Type: [`issueoidc`](#issueoidc)

Contains additional information for an OIDC source.

##### `inputRemoteA3S`

Type: [`issueremotea3s`](#issueremotea3s)

Contains additional information for a remote A3S token source.

##### `opaque`

Type: `map[string]string`

Opaque data that will be included in the issued token.

##### `restrictedNamespace`

Type: `string`

Restricts the namespace where the token can be used.

For instance, if you have have access to `/namespace` and below, you can
tell the policy engine that it should restrict further more to
`/namespace/child`.

Restricting to a namespace you don't have initially access according to the
policy engine has no effect and may end up making the token unusable.

##### `restrictedNetworks`

Type: `[]string`

Restricts the networks from where the token can be used. This will reduce the
existing set of authorized networks that normally apply to the token according
to the policy engine.

For instance, If you have authorized access from `0.0.0.0/0` (by default) or
from
`10.0.0.0/8`, you can ask for a token that will only be valid if used from
`10.1.0.0/16`.

Restricting to a network that is not initially authorized by the policy
engine has no effect and may end up making the token unusable.

##### `restrictedPermissions`

Type: `[]string`

Restricts the permissions of token. This will reduce the existing permissions
that normally apply to the token according to the policy engine.

For instance, if you have administrative role, you can ask for a token that will
tell the policy engine to reduce the permission it would have granted to what is
given defined in the token.

Restricting to some permissions you don't initially have according to the policy
engine has no effect and may end up making the token unusable.

##### `sourceName`

Type: `string`

The name of the source to use.

##### `sourceNamespace`

Type: `string`

The namespace of the source to use.

##### `sourceType` [`required`]

Type: `enum(A3S | AWS | Azure | GCP | HTTP | LDAP | MTLS | OIDC | RemoteA3S | SAML)`

The authentication source. This will define how to verify
credentials from internal or external source of authentication.

##### `token` [`autogenerated`,`read_only`]

Type: `string`

Issued token.

##### `tokenType`

Type: `enum(Identity | Refresh)`

The type of token to issue.

Default value:

```json
"Identity"
```

##### `validity`

Type: `string`

Configures the maximum length of validity for a token, using
[Golang duration syntax](https://golang.org/pkg/time/#example_Duration).

### IssueA3S

Additional issuing information for A3S token source.

#### Example

```json
{
  "token": "valid.jwt.token"
}
```

#### Attributes

##### `token` [`required`]

Type: `string`

The original token.

### IssueAWS

Additional issuing information for AWS STS token source.

#### Example

```json
{
  "ID": "xxxxx",
  "secret": "yyyyy",
  "token": "valid.jwt.token"
}
```

#### Attributes

##### `ID` [`required`]

Type: `string`

The ID of the AWS STS token.

##### `secret` [`required`]

Type: `string`

The secret associated to the AWS STS token.

##### `token` [`required`]

Type: `string`

The original token.

### IssueAzure

Additional issuing information for Azure identity token source.

#### Example

```json
{
  "token": "valid.jwt.token"
}
```

#### Attributes

##### `token` [`required`]

Type: `string`

The original token.

### IssueGCP

Additional issuing information for GCP identity token source.

#### Example

```json
{
  "token": "valid.jwt.token"
}
```

#### Attributes

##### `audience`

Type: `string`

The required audience.

##### `token` [`required`]

Type: `string`

The original token.

### IssueHTTP

Additional issuing information for the HTTP source.

#### Example

```json
{
  "TOTP": "12345",
  "password": "secret",
  "username": "joe"
}
```

#### Attributes

##### `TOTP`

Type: `string`

Time based one time password, if needed.

##### `password` [`required`]

Type: `string`

The password for the user.

##### `username` [`required`]

Type: `string`

The username.

### IssueLDAP

Additional issuing information for the LDAP source.

#### Example

```json
{
  "password": "secret",
  "username": "joe"
}
```

#### Attributes

##### `password` [`required`]

Type: `string`

The password for the user.

##### `username` [`required`]

Type: `string`

The LDAP username.

### IssueOIDC

Additional issuing information for the OIDC source.

#### Example

```json
{
  "noAuthRedirect": false
}
```

#### Attributes

##### `authURL` [`read_only`]

Type: `string`

Contains the auth URL is noAuthRedirect is set to true.

##### `code`

Type: `string`

OIDC ceremony code.

##### `noAuthRedirect`

Type: `boolean`

If set, instruct the server to return the OIDC auth url in authURL instead of
performing an HTTP redirection.

##### `redirectErrorURL`

Type: `string`

OIDC redirect url in case of error.

##### `redirectURL`

Type: `string`

OIDC redirect url.

##### `state`

Type: `string`

OIDC ceremony state.

### IssueRemoteA3S

Additional issuing information for a remote A3S token source.

#### Example

```json
{
  "token": "valid.jwt.token"
}
```

#### Attributes

##### `token` [`required`]

Type: `string`

The remote a3s token.

## authn/source

### A3SSource

A source allowing to trust a remote instance of A3S.

#### Example

```json
{
  "issuer": "https://remote-a3s.com",
  "name": "myoidc"
}
```

#### Relations

##### `GET /a3ssources`

Retrieves the list of a3ssources.

Parameters:

- `q` (`string`): This is an example.

##### `POST /a3ssources`

Creates a new a3ssource.

##### `DELETE /a3ssources/:id`

Delete a particular a3ssource object.

##### `GET /a3ssources/:id`

Get a particular a3ssource object.

##### `PUT /a3ssources/:id`

Update a particular a3ssource object.

#### Attributes

##### `CA`

Type: `string`

The Certificate authority to use to validate the authenticity of the A3S
server. If left empty, the system trust stroe will be used.

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `audience`

Type: `string`

The audience that must be present in the remote a3s token.

##### `description`

Type: `string`

The description of the object.

##### `endpoint`

Type: `string`

Endpoint of the remote a3s server, in case it is different from the issuer. If
left empty, the issuer value will be used.

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `issuer` [`required`]

Type: `string`

The issuer that represents the remote a3s server.

##### `modifier`

Type: [`identitymodifier`](#identitymodifier)

Contains optional information about a remote service that can be used to modify
the claims that are about to be delivered using this authentication source.

##### `name` [`required`]

Type: `string`

The name of the source.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

### HTTPSource

A source that can call a remote service to validate generic credentials.

#### Example

```json
{
  "CA": "-----BEGIN CERTIFICATE-----
MIIBZTCCAQugAwIBAgIRANYvXLTa16Ykvc9hQ4BBLJEwCgYIKoZIzj0EAwIwEjEQ
MA4GA1UEAxMHQUNNRSBDQTAeFw0yMTExMDEyMzAwMTlaFw0zMTA5MTAyMzAwMTla
MBIxEDAOBgNVBAMTB0FDTUUgQ0EwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAASa
7wknroxwB1znupZ67NzTG9Kuc+tNRlbI22eTDNMKYpIexzWDOyiQ95N3GQIdmAz5
wVu9l2V3VuKUpD9mNgkRo0IwQDAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUw
AwEB/zAdBgNVHQ4EFgQURIT2kL76vMj9A3r9AUnaiHnHf4EwCgYIKoZIzj0EAwID
SAAwRQIgS4SGaJ/B1Ul88Jal11Q5BwiY9bY2y9w+4xPNBxSyAIcCIQCSWVq+00xS
bOmROq+EsxO4L/GzJx7MBbeJ6x142VKSBQ==
-----END CERTIFICATE-----",
  "URL": "https://account.acme.com/auth",
  "certificate": "-----BEGIN CERTIFICATE-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END CERTIFICATE-----",
  "key": "-----BEGIN PRIVATE KEY-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END PRIVATE KEY-----",
  "name": "my-http-source"
}
```

#### Relations

##### `GET /httpsources`

Retrieves the list of httpsources.

Parameters:

- `q` (`string`): This is an example.

##### `POST /httpsources`

Creates a new httpsource.

##### `DELETE /httpsources/:id`

Delete a particular httpsource object.

##### `GET /httpsources/:id`

Get a particular httpsource object.

##### `PUT /httpsources/:id`

Update a particular httpsource object.

#### Attributes

##### `CA` [`required`]

Type: `string`

The certificate authority to use to validate the remote http server.

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `URL` [`required`]

Type: `string`

URL of the remote service. This URL will receive a POST containing the
credentials information that must be validated. It must reply with 200 with a
body containing a json array that will be used as claims for the token. Any
other error code will be returned as a 401 error.

##### `certificate` [`required`]

Type: `string`

Client certificate required to call URL. A3S will refuse to send data if the
endpoint does not support client certificate authentication.

##### `description`

Type: `string`

The description of the object.

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `key` [`required`]

Type: `string`

Key associated to the client certificate.

##### `modifier`

Type: [`identitymodifier`](#identitymodifier)

Contains optional information about a remote service that can be used to modify
the claims that are about to be delivered using this authentication source.

##### `name` [`required`]

Type: `string`

The name of the source.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

### IdentityModifier

Information about a remote endpoint to call to eventually modify the identity
claims about to be issued when using the parent source.

#### Example

```json
{
  "CA": "-----BEGIN CERTIFICATE-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END CERTIFICATE-----",
  "URL": "https://modifier.acme.com/modify",
  "certificate": "-----BEGIN CERTIFICATE-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END CERTIFICATE-----",
  "key": "-----BEGIN PRIVATE KEY-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END PRIVATE KEY-----",
  "method": "POST"
}
```

#### Attributes

##### `CA`

Type: `string`

CA to use to validate the identity modfier service.

##### `URL` [`required`]

Type: `string`

URL of the remote service. This URL will receive a call containing the
claims that are about to be delivered. It must reply with 204 if it does not
wish to modify the claims, or 200 alongside a body containing the modified
claims.

##### `certificate` [`required`]

Type: `string`

Client certificate required to call URL. A3S will refuse to send data if the
endpoint does not support client certificate authentication.

##### `key` [`required`]

Type: `string`

Key associated to the client certificate.

##### `method` [`required`]

Type: `enum(GET | POST | PUT | PATCH)`

The HTTP method to use to call the endpoint. For POST/PUT/PATCH the remote
server will receive the claims as a JSON encoded array in the body. For a GET,
the claims will be passed as a query parameter named `claim`.

Default value:

```json
"POST"
```

### LDAPSource

Defines a remote LDAP to use as an authentication source.

#### Example

```json
{
  "CA": "-----BEGIN CERTIFICATE-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END CERTIFICATE-----",
  "address": "ldap.company.com",
  "baseDN": "dc=universe,dc=io",
  "bindDN": "cn=readonly,dc=universe,dc=io",
  "bindPassword": "s3cr3t",
  "bindSearchFilter": "uid={USERNAME}",
  "name": "mypki",
  "securityProtocol": "TLS"
}
```

#### Relations

##### `GET /ldapsources`

Retrieves the list of ldapsources.

Parameters:

- `q` (`string`): This is an example.

##### `POST /ldapsources`

Creates a new ldapsource.

##### `DELETE /ldapsources/:id`

Deletes the ldap source with the given ID.

##### `GET /ldapsources/:id`

Retrieves the ldap source with the given ID.

##### `PUT /ldapsources/:id`

Updates the ldap source with the given ID.

#### Attributes

##### `CA`

Type: `string`

Can be left empty if the LDAP server's certificate is signed by a public,
trusted certificate authority. Otherwise, include the public key of the
certificate authority that signed the LDAP server's certificate.

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `address` [`required`]

Type: `string`

IP address or FQDN of the LDAP server.

##### `baseDN` [`required`]

Type: `string`

The base distinguished name (DN) to use for LDAP queries.

##### `bindDN` [`required`]

Type: `string`

The DN to use to bind to the LDAP server.

##### `bindPassword` [`required`]

Type: `string`

Password to be used with the `bindDN` to authenticate to the LDAP server.

##### `bindSearchFilter`

Type: `string`

The filter to use to locate the relevant user accounts. For Windows-based
systems, the value may be `sAMAccountName={USERNAME}`. For Linux and other
systems, the value may be `uid={USERNAME}`.

Default value:

```json
"uid={USERNAME}"
```

##### `description`

Type: `string`

The description of the object.

##### `ignoredKeys`

Type: `[]string`

A list of keys that must not be imported into the identity token. If
`includedKeys` is also set, and a key is in both lists, the key will be ignored.

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `includedKeys`

Type: `[]string`

A list of keys that must be imported into the identity token. If `ignoredKeys`
is also set, and a key is in both lists, the key will be ignored.

##### `modifier`

Type: [`identitymodifier`](#identitymodifier)

Contains optional information about a remote service that can be used to modify
the claims that are about to be delivered using this authentication source.

##### `name` [`required`]

Type: `string`

The name of the source.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

##### `securityProtocol`

Type: `enum(TLS | InbandTLS | None)`

Specifies the connection type for the LDAP provider.

Default value:

```json
"TLS"
```

### MTLSSource

An MTLS Auth source can be used to issue tokens based on user certificates.

#### Example

```json
{
  "CA": "-----BEGIN CERTIFICATE-----
MIIBZTCCAQugAwIBAgIRANYvXLTa16Ykvc9hQ4BBLJEwCgYIKoZIzj0EAwIwEjEQ
MA4GA1UEAxMHQUNNRSBDQTAeFw0yMTExMDEyMzAwMTlaFw0zMTA5MTAyMzAwMTla
MBIxEDAOBgNVBAMTB0FDTUUgQ0EwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAASa
7wknroxwB1znupZ67NzTG9Kuc+tNRlbI22eTDNMKYpIexzWDOyiQ95N3GQIdmAz5
wVu9l2V3VuKUpD9mNgkRo0IwQDAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUw
AwEB/zAdBgNVHQ4EFgQURIT2kL76vMj9A3r9AUnaiHnHf4EwCgYIKoZIzj0EAwID
SAAwRQIgS4SGaJ/B1Ul88Jal11Q5BwiY9bY2y9w+4xPNBxSyAIcCIQCSWVq+00xS
bOmROq+EsxO4L/GzJx7MBbeJ6x142VKSBQ==
-----END CERTIFICATE-----",
  "name": "mypki"
}
```

#### Relations

##### `GET /mtlssources`

Retrieves the list of mtlssources.

Parameters:

- `q` (`string`): This is an example.

##### `POST /mtlssources`

Creates a new mtlssource.

##### `DELETE /mtlssources/:id`

Delete a particular mtlssource object.

##### `GET /mtlssources/:id`

Get a particular mtlssource object.

##### `PUT /mtlssources/:id`

Update a particular mtlssource object.

#### Attributes

##### `CA` [`required`]

Type: `string`

The Certificate authority to use to validate user certificates in PEM format.

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `description`

Type: `string`

The description of the object.

##### `fingerprints` [`autogenerated`,`read_only`]

Type: `[]string`

The fingerprint of the CAs in the chain.

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `modifier`

Type: [`identitymodifier`](#identitymodifier)

Contains optional information about a remote service that can be used to modify
the claims that are about to be delivered using this authentication source.

##### `name` [`required`]

Type: `string`

The name of the source.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

##### `subjectKeyIDs` [`autogenerated`,`read_only`]

Type: `[]string`

Value of the CAs X.509 SubjectKeyIDs in the chain.

### OIDCSource

An OIDC Auth source can be used to issue tokens based on existing OIDC accounts.

#### Example

```json
{
  "clientID": "12345677890.apps.googleusercontent.com",
  "clientSecret": "Ytgbfjtj4652jHDFGls99jF",
  "endpoint": "https://accounts.google.com",
  "name": "myoidc",
  "scopes": [
    "email",
    "profile"
  ]
}
```

#### Relations

##### `GET /oidcsources`

Retrieves the list of oidcsources.

Parameters:

- `q` (`string`): This is an example.

##### `POST /oidcsources`

Creates a new oidcsource.

##### `DELETE /oidcsources/:id`

Delete a particular oidcsource object.

##### `GET /oidcsources/:id`

Get a particular oidcsource object.

##### `PUT /oidcsources/:id`

Update a particular oidcsource object.

#### Attributes

##### `CA`

Type: `string`

The Certificate authority to use to validate the authenticity of the OIDC
server. If left empty, the system trust stroe will be used. In most of the
cases, you don't need to set this.

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `clientID` [`required`]

Type: `string`

Unique client ID.

##### `clientSecret` [`required`]

Type: `string`

Client secret associated with the client ID.

##### `description`

Type: `string`

The description of the object.

##### `endpoint` [`required`]

Type: `string`

OIDC [discovery
endpoint](https://openid.net/specs/openid-connect-discovery-1_0.html#IssuerDiscovery).

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `modifier`

Type: [`identitymodifier`](#identitymodifier)

Contains optional information about a remote service that can be used to modify
the claims that are about to be delivered using this authentication source.

##### `name` [`required`]

Type: `string`

The name of the source.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

##### `scopes`

Type: `[]string`

List of scopes to allow.

## authz

### Authorization

TODO.

#### Example

```json
{
  "disabled": false,
  "hidden": false,
  "name": "my authorization",
  "permissions": [
    "@auth:role=namespace.administrator",
    "namespace,get,post,put",
    "authorization,get:1234567890"
  ],
  "targetNamespaces": "/my/namespace"
}
```

#### Relations

##### `GET /authorizations`

Retrieves the list of authorization.

Parameters:

- `q` (`string`): This is an example.

##### `POST /authorizations`

Creates a new authorization.

##### `DELETE /authorizations/:id`

Deletes the authorization with the given ID.

Parameters:

- `q` (`string`): This is an example.

##### `GET /authorizations/:id`

Retrieves the authorization with the given ID.

##### `PUT /authorizations/:id`

Updates the authorization with the given ID.

#### Attributes

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `description`

Type: `string`

Description of the Authorization.

##### `disabled`

Type: `boolean`

Set the authorization to be disabled.

##### `hidden`

Type: `boolean`

Hides the policies in children namespaces.

##### `importHash` [`autogenerated`,`read_only`]

Type: `string`

The hash of the structure used to compare with new import version.

##### `importLabel` [`creation_only`]

Type: `string`

The user-defined import label that allows the system to group resources from the
same import operation.

##### `name` [`required`]

Type: `string`

The name of the Authorization.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

##### `permissions` [`required`]

Type: `[]string`

A list of permissions.

##### `subject`

Type: `[][]string`

A tag expression that identifies the authorized user(s).

##### `subnets`

Type: `[]string`

If set, the API authorization will only be valid if the request comes from one
the declared subnets.

##### `targetNamespaces`

Type: `[]string`

Defines the namespace or namespaces in which the permission for subject should
apply. If empty, the object's namespace will be used.

##### `trustedIssuers`

Type: `[]string`

List of issuers to consider before using the policy for a given set of claims.

## authz/check

### Authz

API to verify permissions.

#### Example

```json
{
  "action": "delete",
  "namespace": "/acme",
  "resource": "cats",
  "token": "aaa.valid.jwt"
}
```

#### Relations

##### `POST /authz`

Sends a authz request.

#### Attributes

##### `ID`

Type: `string`

The optional ID of the object to check permission for.

##### `IP`

Type: `string`

IP of the client.

##### `action` [`required`]

Type: `string`

The action to check permission for.

##### `audience`

Type: `string`

Audience that should be checked for.

##### `namespace` [`required`]

Type: `string`

The namespace where to check permission from.

##### `resource` [`required`]

Type: `string`

The resource to check permission for.

##### `token` [`required`]

Type: `string`

The token to check.

### Permissions

API to retrieve the permissions from a user identity.

#### Example

```json
{
  "claims": [
    "sourcetype=mtls",
    "sourcename=my-source",
    "sourcenamespace=/my/namespace",
    "color=blue",
    "size=big"
  ],
  "namespace": "/acme",
  "restrictedNamespace": "/namespace",
  "restrictedNetworks": [
    "10.0.0.0/8"
  ],
  "restrictedPermissions": [
    "@auth:role=enforcer"
  ]
}
```

#### Relations

##### `POST /permissions`

Sends a permissions request.

#### Attributes

##### `ID`

Type: `string`

The optional ID of the object to check permission for.

##### `IP`

Type: `string`

IP of the client.

##### `claims` [`required`]

Type: `[]string`

The list of claims.

##### `error` [`autogenerated`,`read_only`]

Type: `string`

Return an eventual error.

##### `namespace` [`required`]

Type: `string`

The namespace where to check permission from.

##### `permissions` [`autogenerated`,`read_only`]

Type: `map[string]map[string]bool`

The computed permissions.

##### `restrictedNamespace`

Type: `string`

Sets the namespace restrictions that should apply.

##### `restrictedNetworks`

Type: `[]string`

Sets the networks restrictions that should apply.

##### `restrictedPermissions`

Type: `[]string`

Sets the permissions restrictions that should apply.

## core

### Namespace

A namespace is grouping object. Every object is part of a namespace, and every
request is made against a namespace. Namespaces form a tree hierarchy.

#### Example

```json
{
  "name": "mycompany"
}
```

#### Relations

##### `GET /namespaces`

Retrieves the list of namespaces.

Parameters:

- `q` (`string`): This is an example.

##### `POST /namespaces`

Creates a new namespace.

##### `DELETE /namespaces/:id`

Delete a particular namespace object.

##### `GET /namespaces/:id`

Get a particular namespace object.

##### `PUT /namespaces/:id`

Update a particular namespace object.

#### Attributes

##### `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

ID is the identifier of the object.

##### `description`

Type: `string`

The description of the object.

##### `name` [`required`,`creation_only`,`format=^[a-zA-Z0-9-_/]+$`]

Type: `string`

The name of the namespace. When you create a namespace, only put its bare name,
not its full path.

##### `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace of the object.

## core/import

### Import

Import multiple resource at once.

#### Example

```json
{
  "label": "my-super-import"
}
```

#### Relations

##### `POST /import`

Sends an import request.

Parameters:

- `delete` (`boolean`): If set, delete the current imported data.

#### Attributes

##### `A3SSources`

Type: [`[]a3ssource`](#a3ssource)

A3S sources to import.

##### `HTTPSources`

Type: [`[]httpsource`](#httpsource)

HTTP sources to import.

##### `LDAPSources`

Type: [`[]ldapsource`](#ldapsource)

LDAP sources to import.

##### `MTLSSources`

Type: [`[]mtlssource`](#mtlssource)

MTLS sources to import.

##### `OIDCSources`

Type: [`[]oidcsource`](#oidcsource)

OIDC sources to import.

##### `authorizations`

Type: [`[]authorization`](#authorization)

Authorizations to import.

##### `label` [`required`]

Type: `string`

Import label that will be used to identify all the resources imported by this
resource.
